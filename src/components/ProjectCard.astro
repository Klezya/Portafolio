---
interface Props {
  title: string;
  subtitle: string;
  description: string;
  features: string[];
  tags: string[];
  link: string;
  linkLabel: string;
  image: string;
  imageAlt: string;
  placeholderEmoji: string;
}

const { title, subtitle, description, features, tags, link, linkLabel, image, imageAlt, placeholderEmoji } = Astro.props;
---

<article class="card flex flex-col gap-0 overflow-hidden" style="padding: 0;">
  <div class="relative w-full h-52 overflow-hidden" style="background-color: var(--color-bg-muted);">
    <img
      src={image}
      alt={imageAlt}
      class="w-full h-full object-cover project-image"
    />
    <div
      class="absolute inset-0 items-center justify-center flex-col gap-2 project-placeholder hidden"
      style="background-color: var(--color-bg-muted);"
    >
      <span style="font-size: 2.5rem;">{placeholderEmoji}</span>
      <span class="text-xs" style="color: var(--color-text-subtle);">{image.split('/').pop()}</span>
    </div>
  </div>

  <div class="flex flex-col gap-5" style="padding: 1.5rem;">
    <div class="flex items-start justify-between gap-4">
      <div>
        <h3 class="text-xl font-bold mb-1" style="color: var(--color-text);">{title}</h3>
        <p class="text-xs font-medium tracking-wide uppercase" style="color: var(--color-accent);">{subtitle}</p>
      </div>
      <a
        href={link}
        target="_blank"
        rel="noopener"
        class="flex-shrink-0 flex items-center gap-1 text-xs font-medium"
        style="color: var(--color-text-subtle);"
        aria-label={`Ver sitio de ${title}`}
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M15 3h6v6"/><path d="M10 14 21 3"/><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
        </svg>
        {linkLabel}
      </a>
    </div>

    <div class="flex flex-wrap gap-2">
      {tags.map((tag) => (
        <span class="badge">{tag}</span>
      ))}
    </div>

    <details class="project-details group">
      <summary class="flex items-center gap-2 cursor-pointer text-sm font-medium select-none" style="color: var(--color-accent);">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform duration-200 group-open:rotate-90">
          <path d="m9 18 6-6-6-6"/>
        </svg>
        <span class="group-open:hidden">Ver detalles</span>
        <span class="hidden group-open:inline">Ocultar detalles</span>
      </summary>
      
      <div class="flex flex-col gap-4 pt-4 animate-fade-in">
        <p class="text-sm leading-relaxed" style="color: var(--color-text-muted);">
          {description}
        </p>

        <ul class="flex flex-col gap-2">
          {features.map((feat) => (
            <li class="flex items-start gap-2 text-sm" style="color: var(--color-text-muted);">
              <span class="mt-1.5 w-1.5 h-1.5 rounded-full flex-shrink-0" style="background-color: var(--color-accent);"></span>
              {feat}
            </li>
          ))}
        </ul>
      </div>
    </details>

    <a href={link} target="_blank" rel="noopener" class="btn-secondary text-sm w-fit">Ver proyecto â†’</a>
  </div>
</article>

<style>
  .project-details summary::-webkit-details-marker {
    display: none;
  }
  .project-details summary::marker {
    display: none;
    content: '';
  }
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
    animation: fade-in 0.2s ease-out;
  }
</style>
